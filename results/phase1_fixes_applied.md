# Phase 1 Fixes Applied Report

**Run ID:** 20251220_081016
**Timestamp:** 2025-12-20 08:10:16
**Symbols:** MES, MGC
**Status:** PASSED

---

## Critical Fixes Applied

### Fix #1: Barrier Parameters Recalibrated

The barrier multipliers were empirically calibrated to achieve balanced class distributions.

| Horizon | Old k_up | Old k_down | New k_up | New k_down | New max_bars | Status |
|---------|----------|------------|----------|------------|--------------|--------|
| H1 | 0.25 | 0.25 | 0.25 | 0.25 | 5 | INACTIVE |
| H5 | 0.9 | 0.9 | 0.9 | 0.9 | 25 | Active |
| H20 | 2.0 | 2.0 | 2.0 | 2.0 | 100 | Active |

**Note:** H1 is marked INACTIVE due to transaction costs consuming the edge.

### Fix #2: Purge Bars Increased

Purge bars increased from 20 to 60 to prevent label leakage.

### Fix #3: Same-Bar Barrier Race Condition

When both barriers are hit on the same bar, the fix now uses price proximity logic
to determine which barrier was likely hit first.

### Fix #4: Feature Scaling Preparation

Feature scaling statistics computed and stored for consistent normalization during training.

---

## Label Distribution Comparison

### MES

| Horizon | Metric | Before | After | Change |
|---------|--------|--------|-------|--------|
| H1 | Long | 0.0% | 0.0% | +0.0% |
| H1 | Short | 0.0% | 0.0% | +0.0% |
| H1 | Neutral | 0.0% | 0.0% | +0.0% |
| H5 | Long | 0.0% | 0.0% | +0.0% |
| H5 | Short | 0.0% | 0.0% | +0.0% |
| H5 | Neutral | 0.0% | 0.0% | +0.0% |
| H20 | Long | 0.0% | 0.0% | +0.0% |
| H20 | Short | 0.0% | 0.0% | +0.0% |
| H20 | Neutral | 0.0% | 0.0% | +0.0% |

### MGC

| Horizon | Metric | Before | After | Change |
|---------|--------|--------|-------|--------|
| H1 | Long | 0.0% | 0.0% | +0.0% |
| H1 | Short | 0.0% | 0.0% | +0.0% |
| H1 | Neutral | 0.0% | 0.0% | +0.0% |
| H5 | Long | 0.0% | 0.0% | +0.0% |
| H5 | Short | 0.0% | 0.0% | +0.0% |
| H5 | Neutral | 0.0% | 0.0% | +0.0% |
| H20 | Long | 0.0% | 0.0% | +0.0% |
| H20 | Short | 0.0% | 0.0% | +0.0% |
| H20 | Neutral | 0.0% | 0.0% | +0.0% |

---

## Validation Results

- **Passed:** 0
- **Warnings:** 0
- **Failed:** 0

---

## Issues

No issues found.

## Warnings

No warnings.

---

*Generated by rerun_phase1_with_fixes.py on 2025-12-20 08:10:16*
